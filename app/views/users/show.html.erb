<div class="side_area">
  <%= render 'users/sidebar' %>
</div>

<div class="main_area">
  <h1><%= @user.name %>のページ</h1>
  <div class ="user_area">
    <div class="profile_area">  
      <%= image_tag('profile_top.png') %>
    </div>
    <div class="thumbnail_area">
      <% if @user && @user.user_icon.attached? %>
        <%= image_tag @user.user_icon %>
      <% else %>
        <%= image_tag('prum.png') %>
      <% end %>
      <div class ="edit_button">
        <%= button_to 'プロフィールを編集', '#', method: :get, class: "profile_edit_button" %>
      </div>
    </div>
    <div class= "user_information">
      <div class ="name_area">
        <h1><%= @user.name %></h1>
      </div>
      <div class ="email_name">
        <p1>@<%= @user.user_name %></p1>
      </div>
      <div class ="user_description">
        <p2><% if @user.description.present? %>
          <%= @user.description %></p2>
        <% else %>
          <p2>メッセージを設定していません</p2>
        <% end %>
      </div>
      <div class="follow_follower_area">
      </div>
    </div>
  </div>
  <div class="post_area">
      <%= render 'posts/index' %>
  </div>
</div>

<div class="right_area">
</div>

<!-- ログアウトモーダル -->
<div id="logoutModal" class="modal">
  <div class="modal-content">
    <p class="text-confirm">PRUMアカデミーからログアウトしますか？</p>
    <p class="text-guide">いつでもログインし直すことができます。アカウントを切り替える場合は、既存のアカウントを追加すると切り替えることができます。</p>
    <%# <button id="confirmLogout">ログアウト</button> %>
    <%= link_to "ログアウト", destroy_user_session_path, data: { turbo_method: :delete }, id: "logoutButton" %>
    <button id="cancelLogout">キャンセル</button>
  </div>
</div>

<script>
  // ログアウトボタンがクリックされたときにモーダルを表示
  document.getElementById('logoutIcon').addEventListener('click', function(event) {
    event.preventDefault();
    document.getElementById('logoutModal').style.display = 'block';
  });

  // ログアウトモーダル内のログアウトボタンがクリックされたときの処理
  document.getElementById('logoutButton').addEventListener('click', function() {
    // ここに実際のログアウト処理を追加する
    
    // モーダルを閉じる
    document.getElementById('logoutModal').style.display = 'none';
  });

  // ログアウトモーダル内のキャンセルボタンがクリックされたときの処理
  document.getElementById('cancelLogout').addEventListener('click', function() {
    // モーダルを閉じる
    document.getElementById('logoutModal').style.display = 'none';
  });

  // モーダル外をクリックしたら閉じる
  window.onclick = function(event) {
    if (event.target == document.getElementById('logoutModal')) {
      document.getElementById('logoutModal').style.display = 'none';
    }
  };
</script>
